{% extends "base.html" %}
{% block title %}Words{% endblock %}
{% block content %}
<h2>Words for "{{ current_project_name }}"</h2>

<h3>Add New Word</h3>
<!-- Req 5: Database CREATE - Form to add new word -->
<form method="post" action="{{ url_for('words') }}">
    <label for="new_language_word">New Language Word</label>
    <!-- Req 2: HTML Generation - Input field for word -->
    <!-- Req 4: Input Validation - HTML5 pattern: only letters and spaces allowed -->
    <input type="text" name="new_language_word" id="new_language_word" required pattern="[A-Za-z\s]+" title="Only letters and spaces allowed">
    <label for="english_translation">English Translation</label>
    <!-- Req 2: HTML Generation - Input field for translation -->
    <!-- Req 4: Input Validation - HTML5 pattern: only letters and spaces allowed -->
    <input type="text" name="english_translation" id="english_translation" required pattern="[A-Za-z\s]+" title="Only letters and spaces allowed">
    <button type="submit">Add Word</button>
</form>
<script>
// Req 4: Input Validation - Frontend JavaScript validation (prevent numbers as user types)
// This catches errors BEFORE form submission, providing instant user feedback
document.getElementById('new_language_word').addEventListener('keypress', function(e) {
    // Check if key pressed is a number (0-9)
    if (/\d/.test(e.key)) {
        e.preventDefault();  // Block the keystroke
        alert('Numbers not allowed in word field');
    }
});
document.getElementById('english_translation').addEventListener('keypress', function(e) {
    // Check if key pressed is a number (0-9)
    if (/\d/.test(e.key)) {
        e.preventDefault();  // Block the keystroke
        alert('Numbers not allowed in translation field');
    }
});
</script>

<h3>Your Words</h3>
{% if words %}
    <table>
        <thead>
            <tr>
                <th>New Language Word</th>
                <th>English Translation</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for word in words %}
            <tr>
                <td>{{ word['new_language_word'] }}</td>
                <td>{{ word['english_translation'] }}</td>
                <td>
                    <!-- Edit/Delete functionality (simplified for bare minimum) -->
                    <form action="{{ url_for('delete_word', word_id=word['id']) }}" method="post" style="display:inline;">
                        <button type="submit" class="delete-btn">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>No words added yet. Add some above!</p>
{% endif %}
{% endblock %}